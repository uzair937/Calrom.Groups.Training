@using System.Diagnostics.Eventing.Reader
@using CustomRegionEditor.ViewModels
@model EditViewModel

<div class="container">
    <div class="edit-container flex-column">
        @if (Model.IsNew)
        {
            <p>hello</p>
            <div class="model-id" modelId="@Model.CustomRegionGroupViewModel.ID"></div>
            <div id="parent">
                <table class="info-table-header table" data-savechangesurl="@Url.Action("SaveChanges", "Home")">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Description</th>
                            <th scope="col">Regions</th>
                            <th scope="col">Save Changes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>@Html.TextBoxFor(m => m.CustomRegionGroupViewModel.Name, new { placeholder = "Set Name", @class = "model-name form-control", value = Model.CustomRegionGroupViewModel.Name })</td>
                            <td>@Html.TextBoxFor(m => m.CustomRegionGroupViewModel.Description, new { placeholder = "Set Description", @class = "model-description form-control" })</td>

                            @if (Model.CustomRegionGroupViewModel.CustomRegions.Count > 0)
                            {
                                <td>@Model.CustomRegionGroupViewModel.CustomRegions.Count.ToString()</td>
                            }
                            <td><input type="button" value="Save" class="save-changes-button btn btn-dark" /></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        }
        @if (Model.IsEditing)
        {
            <div class="edit-info-container">
                <table class="table-header table" data-deleteurl="@Url.Action("DeleteRegionGroup", "Home")" data-deleteentryurl="@Url.Action("DeleteEntry", "Home")" data-addurl="@Url.Action("AddRegion", "Home")" data-editurl="@Url.Action("EditRegionGroup", "Home")">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Region</th>
                            <th scope="col">Country</th>
                            <th scope="col">State</th>
                            <th scope="col">City</th>
                            <th scope="col">Airport</th>
                            <th scope="col">Remove</th>
                        </tr>
                    </thead>
                    @if (Model.CustomRegionGroupViewModel.CustomRegions.Count > 0)
                    {
                        foreach (var entry in Model.CustomRegionGroupViewModel.CustomRegions)
                        {
                            <tbody>
                                <tr class="single-region-entry" entryId="@entry.ID">
                                    <td>@entry.Region.Name</td>
                                    <td>@entry.Country.Name</td>
                                    <td>@entry.State.Name</td>
                                    <td>@entry.City.Name</td>
                                    <td>@entry.Airport.Name</td>
                                    <td><input type="button" value="Delete" class="delete-button btn btn-dark" /></td>
                                </tr>
                            </tbody>
                        }
                    }
                    <tfoot>
                        <tr class="add-region-row" data-autourl="@Url.Action("AutoComplete", "Home")">
                            <td>
                                @Html.TextBox("region-box", null, new { placeholder = "Region", @class = "region-text-box new-entry-input form-control", autotype = "region" })
                                <div class="region-autocomplete"></div>
                            </td>
                            <td>
                                @Html.TextBox("country-box", null, new { placeholder = "Country", @class = "country-text-box new-entry-input form-control", autotype = "country" })
                                <div class="country-autocomplete"></div>
                            </td>
                            <td>
                                @Html.TextBox("state-box", null, new { placeholder = "State", @class = "state-text-box new-entry-input form-control", autotype = "state" })
                                <div class="state-autocomplete"></div>
                            </td>
                            <td>
                                @Html.TextBox("city-box", null, new { placeholder = "City", @class = "city-text-box new-entry-input form-control", autotype = "city" })
                                <div class="city-autocomplete"></div>
                            </td>
                            <td>
                                @Html.TextBox("airport-box", null, new { placeholder = "Airport", @class = "airport-text-box new-entry-input form-control", autotype = "airport" })
                                <div class="airport-autocomplete"></div>
                            </td>
                            <td><input type="button" value="Add" class="add-button btn btn-dark" /></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        }
    </div>
</div>
